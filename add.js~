/*
const li = document.createElement('li');

li.className = 'collection-item';
li.id = 'new-item';
li.setAttribute('title', 'New Item');
li.appendChild(document.createTextNode('Hello World'));

const link = document.createElement('a')
link.innerHTML = '<i class = "fa fa-remove"></i>';

li.appendChild(link);

document.querySelector('ul').appendChild(li);
*/		       

let Win = window.name;
document.getElementById("win-name").onkeypress = function(e){
    if (!e) e = window.event;
    var keyCode = e.keyCode || e.which;
    if(keyCode == '13') {
	let Name = this.value;
	alert(Name);
	window.document.title = this.value;
    }
}
console.log(window.name);

function getWindowTabs() {
    return browser.tabs.query({currentWindow: true});
}

function listTabs(callback) {
    getWindowTabs().then((tabs) => {
	const List = document.getElementById('tabs-list');
	const currentTabs = document.createDocumentFragment();

	List.textContent = '';

	for (let tab of tabs) {
	    const Parent = document.createElement('div');
	    const Icon = document.createElement('img');
	    const Link = document.createElement('a');
	    const Del = document.createElement('img');

	    Parent.className = 'Tab-Item';
	    Icon.src = tab.favIconUrl;
	    Del.src = 'icons/delete-16.png';
	    Del.classList.add('d-b');
	    //Icon.setAttribute('rel', 'icon');
	    //Icon.setAttribute('href', tab.favIconUrl)
	    
	    console.log(tab.id);
	    Link.textContent = tab.title || tab.id;
	    Link.setAttribute('href', tab.url);
	    Link.id = tab.id;
	    Link.classList.add('list-tabs');
	    Parent.appendChild(Icon);
	    Parent.appendChild(Link);
	    Parent.appendChild(Del);
	    currentTabs.appendChild(Parent);
	}

	List.appendChild(currentTabs);
	callback();
    });
}



    listTabs(test);
    //window.alert('test');
linkTabs();
closeTab();


function linkTabs() {
        document.querySelector("#tabs-list").addEventListener('click', function(e){
	    if (e.target.classList.contains('list-tabs')) {
		e.preventDefault();
	    //console.log(typeof  e.target.id);
		ID = parseInt(e.target.id);
		browser.tabs.update(ID, {active: true});
	    }
	});
}

function closeTab() {
    document.querySelector("#tabs-list").addEventListener('click', function(e) {
	if (e.target.classList.contains('d-b')) {
	    ID = parseInt(e.target.previousSibling.id);
	    browser.tabs.remove(ID);
	    e.target.parentElement.remove();
	}
    });
}

function test() {
document.querySelector(".testButton").onclick = () => {
   browser.tabs.update(4, {active: true});
}
}

document			      
